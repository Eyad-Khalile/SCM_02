{% extends 'base.html' %}
{% load static i18n crispy_forms_tags %}

{% block title %} {% trans "فرص العمل قيد الدراسة" %} {% endblock %}

{% block content %}


<div class="row mt-4 pt-4">
    <h1> {% trans "فرص العمل قيد الدراسة" %} </h1>

    <div class="row justify-content-start">
        {% if jobs %}
        {% for job in jobs %}

        <div class="span3 well jobs-cards" data-aos="fade-in">
            <span class="text-muted">{{ job.created_at|timesince }}</span>
            <center class="pt-3">
                {% if job.org_name %}
                <a href="{% url 'jobs_detail' job.id %}">
                    <figure>
                        <img src="{{ job.org_name.logo.url }}" name="{{ job.title }}" title="{{ job.title }}"
                            alt="{{ job.title }}" width="100%" class="img-circle"></figure>
                </a>
                {% elif job.other_org_name %}
                <a href="{% url 'jobs_detail' job.id %}">
                    <figure>
                        <img src="{{ job.other_org_name.logo.url }}" name="{{ job.title }}" title="{{ job.title }}"
                            alt="{{ job.title }}" width="100%" class="img-circle"></figure>
                </a>
                {% else %}
                {% for other in others %}
                {% if other.job|floatformat:"2" == job.id|floatformat:"2" %}
                <a href="{% url 'jobs_detail' job.id %}">
                    <figure>
                        <img src="{{ other.logo.url }}" name="{{ other.name }}" title="{{ other.name }}"
                            alt="{{ other.name }}" width="100%" class="img-circle"></figure>
                </a>
                {% endif %}
                {% endfor %}

                {% endif %}

                <!-- ORGS NAMES -->
                <h4 class="mt-4">
                    {% trans 'اسم المنظمة' %} :
                    {% if job.org_name %}
                    {{ job.org_name }}
                    {% elif job.other_org_name %}
                    {{ job.other_org_name }}
                    {% else %}
                    {% for other in others %}
                    {% if other.job|floatformat:"2" == job.id|floatformat:"2" %}
                    {{ other.name }}
                    {% endif %}
                    {% endfor %}
                    {% endif %}
                </h4>
                <hr>

                <p> {% trans 'اسم العمل' %} : {{ job.job_title }}</p>
                <p>{% trans 'مكان العمل' %} :
                    {{ job.position_work.name }}
                </p>

                <p>
                    {% trans 'مدة العمل' %} :
                    {% if job.period_months %}
                    {{ job.period_months }}
                    {% trans 'أشهر' %}
                    {% else %}
                    {% trans 'لم يذكر' %}
                    {% endif %}
                </p>


                <p>
                    <a href="{% url 'jobs_detail' job.id %}" class="btn btn-block"
                        title="{% trans 'لقراءة المزيد' %}"><i class="fas fa-book-reader"></i></a>
                </p>

            </center>
        </div>

        {% endfor %}


        <div class="pagination row border-top mt-4 pt-4" dir="ltr">
            <center>
                {% if jobs.paginator.num_pages > 1 %}
                {% if jobs.has_previous %}

                <a href="?page=1" class="btn">
                    <i class="fa fa-angle-double-left"></i>
                </a>
                <a href="?page={{ news.previous_page_number }}" class="btn">
                    <i class="fa fa-angle-left"></i>
                </a>

                {% endif %}

                {% for num in news.paginator.page_range %}
                {% if news.number == num %}
                <a href="?page={{ num }}" class="btn btn-current">{{ num }}</a>
                {% elif num > news.number|add:'-3' and num < news.number|add:'3' %}
                <a href="?page={{ num }}" class="btn">{{ num }}</a>
                {% endif %}
                {% endfor %}


                {% if orgs.has_next %}
                <a href="?page={{ news.next_page_number }}" class="btn"><i class="fa fa-angle-right"></i></a>
                <a href="?page={{ news.paginator.num_pages }}" class="btn"><i class="fa fa-angle-double-right"></i></a>

                {% endif %}
                {% endif %}

            </center>
        </div>


        {% else %}
        <h3> {% trans "لا يوجد حالياً فرص عمل للموافقة على النشر" %} </h3>
        {% endif %}

    </div>
</div>

{% endblock %}